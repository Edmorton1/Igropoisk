(self.webpackChunkslot_machine=self.webpackChunkslot_machine||[]).push([[183],{5183:(e,n,c)=>{c.r(n),c.d(n,{default:()=>t});function u(){var e=(0,g.ok)(),r=e[0],a=e[1];return(0,h.useCallback)(function(e,n){var t=new URLSearchParams(r);t.set(e,String(n)),a(t)},[r,a])}var d=c(4848),h=c(6540),g=c(3175),p=c(493),n=c(3443),l=c(1042);let f=(0,h.memo)(function(e){var t=e.pagesCount,r=u(),e=(0,g.ok)()[0],a=(n=(0,h.useState)(!1))[0],s=n[1],n=e.get("order")||"",i=Number(e.get("page"))||1,e=e.get("release_date")||"",o=(0,h.useMemo)(function(){for(var e=[],n=1;n<=t;n++)e.push(n);return e},[t]),c=(0,l.A)(function(e){r("page",e)},300),n=((0,h.useEffect)(function(){window.scrollTo(0,0),i>o.length&&r("page",o.length)},[o,i]),(0,h.useMemo)(function(){return o.map(function(e,n){var t=n+1;return 1==t||t==o.length||t==i||i-t<4&&0<i-t||t-i<4&&0<t-i?(0,d.jsx)("button",{className:"button-page ".concat(n+1==i&&"active"),onClick:function(){r("page",(n+1).toString()),s(!1)},children:n+1},n):n==o.length-2&&a?(0,d.jsx)("input",{type:"number",onChange:function(e){return c(e.target.value)}}):n==o.length-2?(0,d.jsx)("button",{onClick:function(){return s(!0)},children:"..."},n):void 0})},[o,t,n,i,a,e]));return(0,d.jsx)("div",{className:"pagination",children:n})});var m=c(5942),x=c(59),j=function(e,i,o,c){return new(o=o||Promise)(function(t,n){function r(e){try{s(c.next(e))}catch(e){n(e)}}function a(e){try{s(c.throw(e))}catch(e){n(e)}}function s(e){var n;e.done?t(e.value):((n=e.value)instanceof o?n:new o(function(e){e(n)})).then(r,a)}s((c=c.apply(e,i||[])).next())})},b=function(r,a){var s,i,o,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=e(0),l.throw=e(1),l.return=e(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(t){return function(e){var n=[t,e];if(s)throw new TypeError("Generator is already executing.");for(;c=l&&n[l=0]?0:c;)try{if(s=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,(n=o?[2&n[0],o.value]:n)[0]){case 0:case 1:o=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(!(o=0<(o=c.trys).length&&o[o.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))c.label=n[1];else if(6===n[0]&&c.label<o[1])c.label=o[1],o=n;else{if(!(o&&c.label<o[2])){o[2]&&c.ops.pop(),c.trys.pop();continue}c.label=o[2],c.ops.push(n)}}n=a.call(r,c)}catch(e){n=[6,e],i=0}finally{s=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},y=function(n,t,r,a,s,i,o){return j(void 0,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(x.URL_SERVER_API,"getEverything?genre=").concat(t,"&order=").concat(n,"&developer=").concat(r,"&publisher=").concat(a,"&release_date=").concat(s,"&status=").concat(i,"&page=").concat(o))];case 1:return[2,e.sent().json()]}})})},v=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||((r=r||Array.prototype.slice.call(n,0,a))[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};let k=(0,h.memo)((0,n.PA)(function(){var e=c(847),t=u(),n=(0,g.ok)()[0],r=(i=(0,h.useState)(""))[0],a=i[1],s=n.get("genre")||"",i=n.get("page")||"",o=n.get("order")||"",n=n.get("release_date")||"";return i=(0,h.useMemo)(function(){return e.map(function(n,e){if(n.description.toLowerCase().includes(r))return(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{checked:s.split(",").includes(n.id.toString()),onChange:function(){var e=s?s.split(","):[],e=e.includes(n.id.toString())?e.filter(function(e){return e!=n.id.toString()}):v(v([],e,!0),[n.id.toString()],!1);t("genre",e.length?e.join(","):"")},type:"checkbox"}),n.description]})},e)})},[s,r,i,o,n]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{children:"Жанры"}),(0,d.jsx)("input",{type:"text",placeholder:"Поиск по жанру...",onChange:function(e){return a(e.target.value)}}),(0,d.jsx)("ul",{className:"genreParse",children:i})]})}));var w=[1969,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025];let C=(0,h.memo)(function(){var e=(s=(0,g.ok)())[0],n=s[1],t=u(),r=(s=(0,h.useState)(!1))[0],a=s[1],s=e.get("order")||"",i=e.get("status")||"",o=Number(e.get("release_date"))||"",c=(e=(0,h.useState)(o?w.findIndex(function(e){return e==o}):w.length-1))[0],l=e[1],e=(0,h.useMemo)(function(){return(0,d.jsxs)("ul",{children:[(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{onChange:function(){t("status","soon")},type:"radio",name:"status",checked:"soon"==i}),"Скоро выйдет"]})}),(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{onChange:function(){t("status","released")},type:"radio",name:"status",checked:"soon"!=i}),"Вышло"]})})]})},[i]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"but-fil ".concat(r?"but-swipe":"but-noswipe"),onClick:function(){a(!r)},children:"Меню"}),(0,d.jsxs)("section",{className:"filter ".concat(r?"swipe":"noswipe"),children:[(0,d.jsx)("h3",{children:"Статус"}),e,(0,d.jsx)("h3",{children:"Сортровка"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{checked:""==s||"rating"==s,onChange:function(){t("order","rating")},name:"sorting",type:"radio"}),"По рейтингу"]})}),(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{checked:"popularity"==s,type:"radio",onChange:function(){return t("order","popularity")},name:"sorting"}),"По популярности"]})}),(0,d.jsx)("label",{children:(0,d.jsxs)("li",{children:[(0,d.jsx)("input",{checked:"release_date"==s,type:"radio",onChange:function(){return t("order","release_date")},name:"sorting"}),"По дате выхода"]})})]}),(0,d.jsx)("h3",{children:"Год выхода"}),(0,d.jsx)("input",{value:c,type:"range",min:0,max:w.length-1,onChange:function(e){t("release_date",w[Number(e.target.value)]),l(Number(e.target.value))},disabled:"soon"==i}),(0,d.jsx)("p",{style:{height:"28px"},children:""!=o?"Показывать только игры вышедшие в ".concat(o," году"):"Показывать все игры"}),(0,d.jsx)("button",{className:"button-stand br-n",onClick:function(){t("release_date",""),l(w.length-1)},children:"Сбросить год"}),(0,d.jsx)("button",{className:"button-stand br-n",onClick:function(){n({}),l(w.length-1)},children:"Сбросить всё"}),(0,d.jsx)(k,{})]})]})});let t=(0,h.memo)((0,n.PA)(function(){var e,n,t,r,a,s,i,o,c=(0,g.ok)()[0].get("order")||"rating",l=(e=(0,g.zy)().search,e=new URLSearchParams(e),n=e.get("order")||"rating",t=e.get("genre")||"",r=e.get("developer")||"",a=e.get("publisher")||"",s=e.get("release_date")||"",i=e.get("status")||"",o=e.get("page")||"1",(0,m.useQuery)({queryKey:["games",n,t,r,a,s,i,o],queryFn:function(){return y(n,t,r,a,s,i,o)},onSuccess:function(e){p.A.getGet(e)}}).isLoading);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("main",{className:"game-main",children:[(0,d.jsxs)("div",{className:"game-section",children:[(0,d.jsx)("h1",{children:"Игры"}),(0,d.jsxs)("p",{children:["На этой странице отображены Игры, отсортированные по ","rating"==c?"рейтингу":"popularity"==c?"популярности":"release_date"==c?"дате выхода":"рейтингу"]}),(0,d.jsx)("section",{className:"games",children:p.A.games.map(function(e,n){return(0,d.jsxs)(g.N_,{to:"/games/".concat(e.steam_id),className:"gameCard",style:l?{opacity:"0.5"}:{},children:[(0,d.jsx)("img",{src:e.header_image}),(0,d.jsxs)("div",{className:"gameInfo",children:[(0,d.jsx)("span",{children:e.name}),(0,d.jsx)("span",{children:e.release_date})]})]},n)})}),(0,d.jsx)(f,{pagesCount:p.A.pages})]}),(0,d.jsx)(C,{})]})})}))}}]);