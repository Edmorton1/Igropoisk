"use strict";(self.webpackChunkslot_machine=self.webpackChunkslot_machine||[]).push([[183],{5183:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var r=t(4848),a=t(6540),s=t(3175),o=t(493),i=t(3443),c=function(){var e=(0,s.ok)(),n=e[0],t=e[1];return(0,a.useCallback)((function(e,r){var a=new URLSearchParams(n);a.set(e,String(r)),t(a)}),[n,t])},l=t(1042);const u=(0,a.memo)((function(e){var n=e.pagesCount,t=c(),o=(0,s.ok)()[0],i=(0,a.useState)(!1),u=i[0],d=i[1],h=o.get("order")||"",g=Number(o.get("page"))||1,p=o.get("release_date")||"",f=(0,a.useMemo)((function(){for(var e=[],t=1;t<=n;t++)e.push(t);return e}),[n]),m=(0,l.A)((function(e){t("page",e),console.log(e)}),300);(0,a.useEffect)((function(){window.scrollTo(0,0),g>f.length&&t("page",f.length)}),[f,g]);var x=(0,a.useMemo)((function(){return f.map((function(e,n){var a=n+1;return 1==a||a==f.length||a==g||4>g-a&&g-a>0||4>a-g&&a-g>0?(0,r.jsx)("button",{className:"button-page ".concat(n+1==g&&"active"),onClick:function(){t("page",(n+1).toString()),d(!1)},children:n+1},n):n==f.length-2&&u?(0,r.jsx)("input",{type:"number",onChange:function(e){return m(e.target.value)}}):n==f.length-2?(0,r.jsx)("button",{onClick:function(){return d(!0)},children:"..."},n):void 0}))}),[f,n,h,g,u,p]);return(0,r.jsx)("div",{className:"pagination",children:x})}));var d=t(5942),h=t(59),g=function(){var e=(0,s.zy)().search,n=new URLSearchParams(e),t=n.get("order")||"rating",r=n.get("genre")||"",a=n.get("developer")||"",i=n.get("publisher")||"",c=n.get("release_date")||"",l=n.get("status")||"",u=n.get("page")||"1";return(0,d.useQuery)({queryKey:["games",t,r,a,i,c,l,u],queryFn:function(){return function(e,n,t,r,a,s,o){return i=void 0,c=void 0,u=function(){return function(e,n){var t,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(i){switch(i.label){case 0:return[4,fetch("".concat(h.URL_SERVER_API,"getEverything?genre=").concat(n,"&order=").concat(e,"&developer=").concat(t,"&publisher=").concat(r,"&release_date=").concat(a,"&status=").concat(s,"&page=").concat(o))];case 1:return[2,i.sent().json()]}}))},new((l=void 0)||(l=Promise))((function(e,n){function t(e){try{a(u.next(e))}catch(e){n(e)}}function r(e){try{a(u.throw(e))}catch(e){n(e)}}function a(n){var a;n.done?e(n.value):(a=n.value,a instanceof l?a:new l((function(e){e(a)}))).then(t,r)}a((u=u.apply(i,c||[])).next())}));var i,c,l,u}(t,r,a,i,c,l,u)},onSuccess:function(e){o.A.getGet(e)}})},p=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};const f=(0,a.memo)((0,i.PA)((function(){var e=t(847),n=c(),o=(0,s.ok)()[0],i=(0,a.useState)(""),l=i[0],u=i[1],d=o.get("genre")||"",h=o.get("page")||"",g=o.get("order")||"",f=o.get("release_date")||"",m=(0,a.useMemo)((function(){return e.map((function(e,t){if(e.description.toLowerCase().includes(l))return(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{checked:d.split(",").includes(e.id.toString()),onChange:function(){var t=d?d.split(","):[],r=t.includes(e.id.toString())?t.filter((function(n){return n!=e.id.toString()})):p(p([],t,!0),[e.id.toString()],!1);n("genre",r.length?r.join(","):"")},type:"checkbox"}),e.description]})},t)}))}),[d,l,h,g,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:"Жанры"}),(0,r.jsx)("input",{type:"text",placeholder:"Поиск по жанру...",onChange:function(e){return u(e.target.value)}}),(0,r.jsx)("ul",{className:"genreParse",children:m})]})})));var m=[1969,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025];const x=(0,a.memo)((function(){var e=(0,s.ok)(),n=e[0],t=e[1],o=c(),i=(0,a.useState)(!1),l=i[0],u=i[1],d=n.get("order")||"",h=n.get("status")||"",g=Number(n.get("release_date"))||"",p=(0,a.useState)(g?m.findIndex((function(e){return e==g})):m.length-1),x=p[0],j=p[1],b=(0,a.useMemo)((function(){return(0,r.jsxs)("ul",{children:[(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{onChange:function(){o("status","soon")},type:"radio",name:"status",checked:"soon"==h}),"Скоро выйдет"]})}),(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{onChange:function(){o("status","released")},type:"radio",name:"status",checked:"soon"!=h}),"Вышло"]})})]})}),[h]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"but-fil ".concat(l?"but-swipe":"but-noswipe"),onClick:function(){u(!l)},children:"Меню"}),(0,r.jsxs)("section",{className:"filter ".concat(l?"swipe":"noswipe"),children:[(0,r.jsx)("h3",{children:"Статус"}),b,(0,r.jsx)("h3",{children:"Сортровка"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{checked:""==d||"rating"==d,onChange:function(){o("order","rating")},name:"sorting",type:"radio"}),"По рейтингу"]})}),(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{checked:"popularity"==d,type:"radio",onChange:function(){return o("order","popularity")},name:"sorting"}),"По популярности"]})}),(0,r.jsx)("label",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("input",{checked:"release_date"==d,type:"radio",onChange:function(){return o("order","release_date")},name:"sorting"}),"По дате выхода"]})})]}),(0,r.jsx)("h3",{children:"Год выхода"}),(0,r.jsx)("input",{value:x,type:"range",min:0,max:m.length-1,onChange:function(e){o("release_date",m[Number(e.target.value)]),j(Number(e.target.value))},disabled:"soon"==h}),(0,r.jsx)("p",{style:{height:"28px"},children:""!=g?"Показывать только игры вышедшие в ".concat(g," году"):"Показывать все игры"}),(0,r.jsx)("button",{className:"button-stand br-n",onClick:function(){o("release_date",""),j(m.length-1)},children:"Сбросить год"}),(0,r.jsx)("button",{className:"button-stand br-n",onClick:function(){t({}),j(m.length-1)},children:"Сбросить всё"}),(0,r.jsx)(f,{})]})]})})),j=(0,a.memo)((0,i.PA)((function(){var e=(0,s.ok)()[0].get("order")||"rating",n=g().isLoading;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("main",{className:"game-main",children:[(0,r.jsxs)("div",{className:"game-section",children:[(0,r.jsx)("h1",{children:"Игры"}),(0,r.jsxs)("p",{children:["На этой странице отображены Игры, отсортированные по ","rating"==e?"рейтингу":"popularity"==e?"популярности":"release_date"==e?"дате выхода":"рейтингу"]}),(0,r.jsx)("section",{className:"games",children:o.A.games.map((function(e,t){return(0,r.jsxs)(s.N_,{to:"/games/".concat(e.steam_id),className:"gameCard",style:n?{opacity:"0.5"}:{},children:[(0,r.jsx)("img",{src:e.header_image}),(0,r.jsxs)("div",{className:"gameInfo",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsx)("span",{children:e.release_date})]})]},t)}))}),(0,r.jsx)(u,{pagesCount:o.A.pages})]}),(0,r.jsx)(x,{})]})})})))}}]);