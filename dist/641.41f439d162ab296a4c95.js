"use strict";(self.webpackChunkslot_machine=self.webpackChunkslot_machine||[]).push([[641],{4237:(e,t,n)=>{e.exports=n.p+"assets/user-placeholder.jpg"},4877:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(4848),o=n(3175),a=n(7555),s=n(3443),c=n(961),i=n(6540);const u=(0,i.memo)((0,s.PA)((function(e){var t=e.children,n=e.link,s=e.time,u=e.color;return(0,i.useEffect)((function(){var e=setTimeout((function(){a.A.close()}),s+50);return function(){return clearTimeout(e)}}),[s,a.A.isOpen]),a.A.isOpen?c.createPortal((0,r.jsx)(o.N_,{to:n,className:"snackbar",style:{animation:"fadeInOut 0.2s ease-in-out, ending 0.2s linear ".concat(s/1e3-.2,"s forwards"),backgroundColor:u||""},children:t}),document.body):null})))},5054:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(7813),o=n(1083),a=n(1987),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};const i=new(function(){function e(){this.relation=null,(0,r.l_)(this)}return e.prototype.getByUser=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(a){switch(a.label){case 0:return n=t||"",r=this,[4,o.A.get("http://localhost:3000/api/relations/".concat(e,"?game=").concat(n))];case 1:return r.relation=a.sent().data,[2]}}))}))},e.prototype.post=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return console.log(e),[4,a.A.post("http://localhost:3000/api/relations/",e)];case 1:return t.sent(),[4,this.getByUser(String(e.user_id))];case 2:return t.sent(),[2]}}))}))},e.prototype.grade=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,fetch("http://localhost:3000/api/grades?game=".concat(e))];case 1:return[2,t.sent().json()]}}))}))},e.prototype.gradeChange=function(e,t,n){return s(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return 0==e?e=null:Number(e),console.log(e,t),[4,a.A.put("http://localhost:3000/api/relations/".concat(t),{grade:e,user_id:n})];case 1:return r.sent(),[2]}}))}))},e.prototype.relationGame=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return[4,fetch("http://localhost:3000/api/relations/".concat(e,"?game=").concat(t))];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),console.log(n),[2,n]}}))}))},e.prototype.relationParse=function(){return s(this,void 0,void 0,(function(){var e,t,n,a,s,i;return c(this,(function(c){switch(c.label){case 0:e={planned:[],dropped:[],play:[],passed:[]},t=0,n=(0,r.HO)(this.relation),c.label=1;case 1:return t<n.length?(a=n[t],[4,o.A.get("http://localhost:3000/api/gameDB/".concat(a.game))]):[3,5];case 2:return s=c.sent().data,[4,o.A.get("http://localhost:3000/api/grades?game=".concat(a.game))];case 3:i=c.sent().data[0].grade,a.name=s.name,a.capsule_image=s.capsule_image,a.total_reviews=s.total_reviews,a.rating=(100-s.total_negative/s.total_reviews*100).toFixed(2),a.grade=a.grade,a.gradeSite=i,"planned"==a.status&&e.planned.push(a),"dropped"==a.status&&e.dropped.push(a),"play"==a.status&&e.play.push(a),"passed"==a.status&&e.passed.push(a),c.label=4;case 4:return t++,[3,1];case 5:return[2,e]}}))}))},e}())},5499:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6540);const o=function(){var e=this,t=(0,r.useState)(!1),n=t[0],o=t[1];return[n,function(t){return n=e,r=void 0,s=function(){return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,o(!0)];case 3:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{i(s.next(e))}catch(e){t(e)}}function c(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}i((s=s.apply(n,r||[])).next())}));var n,r,a,s}]}},7166:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(4848),o=n(7555),a=n(4877),s=n(6540),c=n(1712);const i=function(){try{var e=localStorage.getItem("accessToken");JSON.parse(atob(e.split(".")[1])).exp,Date.now()}catch(e){}var t=(0,s.useContext)(c.o);return[(0,r.jsx)(a.A,{link:"/login",time:5e3,children:localStorage.getItem("accessToken")?"Время ожидания вышло, повторите действие, или повторно авторизируйтесь":"Для этого действия необходима авторизация"}),function(e,n){void 0===n&&(n=!0);try{var r=localStorage.getItem("accessToken"),a=JSON.parse(atob(r.split(".")[1]));if(console.log(1e3*a.exp-Date.now(),n),1e3*a.exp-Date.now()>0)return e();throw t.refreshAccessToken(),new Error("ACCESS TOKEN ПРОСРОЧИЛСЯ 401")}catch(e){return n?o.A.open():""}}]}},7555:(e,t,n)=>{n.d(t,{A:()=>s});var r,o=n(8803),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});const s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(o.A))},8803:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7813);const o=function(){function e(){this.isOpen=!1,(0,r.Gn)(this,{isOpen:r.sH,open:r.XI,close:r.XI})}return e.prototype.open=function(){this.isOpen=!0},e.prototype.close=function(){this.isOpen=!1},e}()},9220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(4848),o=n(6540),a=n(3175),s=n(7813),c=n(1987);const i=new(function(){function e(){(0,s.l_)(this)}return e.prototype.game=function(e){return t=this,n=void 0,o=function(){var t;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(n){switch(n.label){case 0:return[4,c.A.get("/game/".concat(e))];case 1:return t=n.sent(),console.log(t),[2,t.data]}}))},new((r=void 0)||(r=Promise))((function(e,a){function s(e){try{i(o.next(e))}catch(e){a(e)}}function c(e){try{i(o.throw(e))}catch(e){a(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,c)}i((o=o.apply(t,n||[])).next())}));var t,n,r,o},e}());var u=n(1712),l=n(1083),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};const p=new(function(){function e(){this.comments=null,(0,s.l_)(this)}return e.prototype.getByGame=function(e){return h(this,void 0,void 0,(function(){var t,n=this;return f(this,(function(r){switch(r.label){case 0:return[4,l.A.get("http://localhost:3000/api/comments/".concat(e))];case 1:return t=r.sent().data,(0,s.h5)((function(){n.comments=t})),[2]}}))}))},e.prototype.post=function(e){return h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,c.A.post("http://localhost:3000/api/comments/",e)];case 1:return t.sent(),console.log(e),[4,this.getByGame(String(e.game))];case 2:return t.sent(),[2]}}))}))},e.prototype.change=function(e,t,n,r){return h(this,void 0,void 0,(function(){return f(this,(function(o){switch(o.label){case 0:return[4,c.A.put("http://localhost:3000/api/comments/".concat(e),{text:t,user_id:r})];case 1:return o.sent(),[4,this.getByGame(String(n))];case 2:return o.sent(),[2]}}))}))},e.prototype.delete=function(e,t){return h(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return console.log(e,t),[4,c.A.delete("http://localhost:3000/api/comments/".concat(e))];case 1:return n.sent(),[4,this.getByGame(String(t))];case 2:return n.sent(),[2]}}))}))},e}());var d=n(3443),m=n(5054),g=n(7166);const v=(0,o.memo)((function(e){var t=e.user,n=e.relation,s=(0,a.g)().id,c=(0,g.A)(),i=c[0],u=c[1],l=(0,o.useState)(n?n.status:""),h=l[0],f=l[1];return(0,r.jsxs)(r.Fragment,{children:[i,(0,r.jsxs)("select",{className:"select ".concat(h),value:h,onChange:function(e){return u((function(){!function(e){var n={game:Number(s),status:e,user_id:t.id};m.A.post(n)}(e.target.value),f(e.target.value)}))},children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Добавить в список"}),(0,r.jsx)("option",{value:"passed",children:"Пройдено"}),(0,r.jsx)("option",{value:"dropped",children:"Брошено"}),(0,r.jsx)("option",{value:"planned",children:"Запланированно"}),(0,r.jsx)("option",{value:"play",children:"Играю"})]})]})}));var y=n(4237),b=n(9785),x=n(59),w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)};const j=(0,o.memo)((0,d.PA)((function(e){var t=e.user,n=(0,o.useState)(5),s=n[0],c=n[1],i=(0,a.g)().id,u=(0,g.A)(),l=u[0],h=u[1],f=(0,o.useState)(0),d=f[0],m=f[1],v=(0,o.useState)(""),j=v[0],_=v[1],S=(0,b.mN)(),k=S.register,A=S.handleSubmit;return(0,r.jsxs)("section",{className:"comments",children:[l,(0,r.jsx)("h2",{children:"Комментарии"}),p.comments.slice(0,s).map((function(e,n){return(0,r.jsxs)("div",{className:"comment",children:[(0,r.jsxs)("div",{className:"com-head",children:[(0,r.jsx)(a.N_,{to:"/users/".concat(e.nickname),children:(0,r.jsx)("img",{onError:function(e){return e.currentTarget.src=y},src:"".concat(x.URL_SERVER_AVATARS).concat(e.avatar)})}),(0,r.jsxs)("div",{className:"name-date",children:[(0,r.jsx)(a.N_,{to:"/users/".concat(e.nickname),children:e.nickname}),(0,r.jsx)("span",{children:e.created_at})]})]}),d==e.id&&t.id==e.user_id?(0,r.jsx)("textarea",{style:{marginTop:"10px"},value:j,onChange:function(e){return _(e.target.value)}}):(0,r.jsx)("p",{children:e.text}),d!=e.id&&t.id==e.user_id&&(0,r.jsx)("button",{onClick:function(){m(e.id),_(e.text)},children:"Изменить"}),d!=e.id&&t.id==e.user_id&&(0,r.jsx)("button",{onClick:function(){return p.delete(e.id,e.game)},children:"Удалить"}),d==e.id&&t.id==e.user_id&&(0,r.jsx)("button",{className:"button-stand",onClick:function(){p.change(e.id,j,e.game,e.user_id),m(0)},children:"Изменить"})]},n)})),p.comments.length>s&&(0,r.jsx)("button",{className:"more",onClick:function(){return c(s+5)},children:"Загрузить ещё комментарии"}),t&&(0,r.jsxs)("form",{onSubmit:A((function(e){return h((function(){return function(e){console.log(e);var n={game:Number(i),text:e,user_id:t.id};p.post(n)}(e.text)}))})),children:[(0,r.jsx)("h3",{children:"Оставить комментарий"}),(0,r.jsx)("textarea",w({},k("text"))),(0,r.jsx)("button",{className:"button-stand",children:"Написать"})]})]})}))),_=n.p+"assets/left.png",S=n.p+"assets/right.png";var k=n(2433);const A=(0,o.memo)((function(e){var t=e.game,n=(0,o.useState)(0),a=n[0],s=n[1],c=(0,o.useState)(null),i=c[0],u=c[1],l=(0,o.useState)(!1),h=l[0],f=l[1],p=(0,o.useState)(0),d=p[0],m=p[1];function g(e){if(a+e>0)return s(0);var n=document.getElementsByClassName("slider-img")[0].clientWidth*(t.screenshots.length-window.innerWidth/541);if(a+e<-n)return s(-n);s(a+e)}return console.log(d,t.screenshots.length),(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsx)(k.A,{setModal:f,children:(0,r.jsx)("img",{src:i,className:"screenshot"})}),(0,r.jsx)("h3",{children:"Скриншоты:"}),(0,r.jsxs)("div",{className:"slider",children:[(0,r.jsx)("img",{src:S,className:"slider-but right",onClick:function(){return g(-500)}}),(0,r.jsx)("img",{src:_,className:"slider-but left",onClick:function(){return g(500)}}),t.screenshots.map((function(e,n){return(0,r.jsx)("img",{className:"slider-img",style:{transform:"translateX(".concat(a,"px)")},src:e.path_thumbnail,onClick:function(){u(e.path_full),f(!0),m(n)},onKeyDown:function(e){var n;"ArrowRight"==(n=e.key)?d<t.screenshots.length-1?(u(t.screenshots[d+1].path_full),m(d+1)):(u(t.screenshots[0].path_full),m(0)):"ArrowLeft"==n&&(d>0?(u(t.screenshots[d-1].path_full),m(d-1)):(u(t.screenshots[t.screenshots.length-1].path_full),m(t.screenshots.length-1))),console.log(e.key)},tabIndex:0},n)}))]})]})})),N=(0,o.memo)((function(e){e.user;var t=e.relation,n=new Array(10).fill(""),a=(0,o.useState)(t?Number(t.grade)-1:-1),s=a[0],c=a[1],i=(0,o.useState)(t?Number(t.grade)-1:-1),u=i[0],l=i[1],h=(0,o.useState)(!!t),f=h[0],p=h[1],d=(0,g.A)(),v=d[0],y=d[1];return(0,r.jsxs)(r.Fragment,{children:[v,(0,r.jsx)("div",{onMouseLeave:function(){c(u-1),p(!0)},children:(console.log("stars"),n.map((function(e,n){return(0,r.jsx)("span",{onMouseEnter:function(){c(n),p(!1)},onClick:function(){return y((function(){l(s+1),p(!0),m.A.gradeChange(s+1,t.id,t.user_id)}))},className:"".concat(n<=s?f?"star freeze":"star current":"star"),children:"★"},n)})))})]})}));var O=n(5499);const C=(0,o.memo)((0,d.PA)((function(){var e=(0,o.useContext)(u.o),t=(0,s.HO)(e.user),n=(0,o.useState)(!1),c=n[0],l=n[1],h=(0,o.useState)(null),f=h[0],d=h[1],g=(0,o.useState)(!1),y=g[0],b=g[1],w=(0,o.useState)(null),_=w[0],S=w[1],k=(0,a.g)().id,C=(0,o.useState)(!1),E=C[0],I=C[1],T=(0,O.A)(),G=T[0];if(T[1],(0,o.useEffect)((function(){!function(){var e,n,r,o;e=this,n=void 0,o=function(){var e,n,r;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(o){switch(o.label){case 0:return[4,i.game(k)];case 1:return e=o.sent(),t?[4,m.A.relationGame("".concat(t.id),k)]:[3,3];case 2:return r=o.sent()[0],[3,4];case 3:r=null,o.label=4;case 4:return n=r,[4,p.getByGame(k)];case 5:return o.sent(),[4,d(e[k].data)];case 6:return o.sent(),S(n),l(!0),[2]}}))},new((r=void 0)||(r=Promise))((function(t,a){function s(e){try{i(o.next(e))}catch(e){a(e)}}function c(e){try{i(o.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,c)}i((o=o.apply(e,n||[])).next())}))}()}),[k]),G)throw new Error("Ошибка: Steam API не отвечает");var P=(0,o.useMemo)((function(){return(0,r.jsx)("button",{onClick:function(){return I(!E)},style:{marginTop:"10px"},className:"more",children:E?"Скрыть полное описание":"Открыть полное описание"})}),[E]),M=(0,o.useMemo)((function(){return(0,r.jsx)(N,{user:t,relation:_})}),[_]),B=(0,o.useMemo)((function(){return(0,r.jsx)(v,{user:t,relation:_})}),[_]);if(c)return(0,r.jsxs)("main",{style:{paddingBottom:"2vh"},children:[(0,r.jsx)("h1",{children:(0,r.jsx)("strong",{children:f.name})}),(0,r.jsxs)("section",{className:"game-information",children:[(0,r.jsxs)("div",{className:"game-left",children:[(0,r.jsx)("img",{src:f.header_image}),B,_&&M]}),(0,r.jsxs)("div",{className:"game-right",children:[(0,r.jsxs)("p",{children:["Дата релиза: ",(0,r.jsx)(a.N_,{to:"".concat(x.URL_CLIENT_GAMES,"?release_date=").concat(f.release_date.date.split(" ")[2]),children:f.release_date.date})]}),(0,r.jsxs)("p",{children:["Жанр: ",f.genres.map((function(e,t){return(0,r.jsxs)(a.N_,{to:"/".concat(e.description),children:[e.description,", "]},t)}))]}),(0,r.jsxs)("p",{children:["Категории: ",f.categories.map((function(e,t){return(0,r.jsxs)("span",{children:[e.description,", "]},t)}))]}),(0,r.jsxs)("p",{children:["Разработчик: ",f.developers.map((function(e,t){return(0,r.jsxs)(a.N_,{to:"".concat(x.URL_CLIENT_GAMES,"?developer=").concat(e),children:[e,", "]},t)}))]}),(0,r.jsxs)("p",{children:["Издатель: ",f.publishers.map((function(e,t){return(0,r.jsxs)(a.N_,{to:"".concat(x.URL_CLIENT_GAMES,"?publisher=").concat(e),children:[e,", "]},t)}))]}),f.metacritic&&(0,r.jsxs)("p",{children:["Оценка на Metacritic: ",f.metacritic.score]}),(0,r.jsxs)("p",{style:y?{}:{cursor:"pointer"},onClick:function(){return b(!0)},children:["Короткое описание: ",y?f.short_description:f.short_description.split(" ").slice(0,10).join(" ")+"..."]})]})]}),P,E&&(0,r.jsx)("div",{className:"full-description",dangerouslySetInnerHTML:{__html:f.detailed_description}}),(0,r.jsx)(A,{game:f}),(0,r.jsx)(j,{user:t})]});(0,r.jsx)("div",{children:"Загрузка"})})))}}]);