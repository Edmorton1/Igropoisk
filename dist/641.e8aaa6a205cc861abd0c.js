(self.webpackChunkslot_machine=self.webpackChunkslot_machine||[]).push([[641],{4237:(e,t,n)=>{e.exports=n.p+"assets/user-placeholder.jpg"},4877:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(4848),a=n(3175),s=n(7555),t=n(3443),c=n(961),i=n(6540);let r=(0,i.memo)((0,t.PA)(function(e){var t=e.children,n=e.link,r=e.time,e=e.color;return(0,i.useEffect)(function(){var e=setTimeout(function(){s.A.close()},r+50);return function(){return clearTimeout(e)}},[r,s.A.isOpen]),s.A.isOpen?c.createPortal((0,o.jsx)(a.N_,{to:n,className:"snackbar",style:{animation:"fadeInOut 0.2s ease-in-out, ending 0.2s linear ".concat(r/1e3-.2,"s forwards"),backgroundColor:e||""},children:t}),document.body):null}))},5054:(e,t,n)=>{n.d(t,{A:()=>l});var c=n(7813),i=n(1083),o=n(1987),a=n(59),s=function(e,s,c,i){return new(c=c||Promise)(function(n,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}a((i=i.apply(e,s||[])).next())})},u=function(r,o){var a,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(a=1,s&&(c=2&t[0]?s.return:t[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,t[1])).done)return c;switch(s=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))i.label=t[1];else if(6===t[0]&&i.label<c[1])i.label=c[1],c=t;else{if(!(c&&i.label<c[2])){c[2]&&i.ops.pop(),i.trys.pop();continue}i.label=c[2],i.ops.push(t)}}t=o.call(r,i)}catch(e){t=[6,e],s=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function r(){(this.relation=null,c.l_)(this)}r.prototype.getByUser=function(r,o){return s(this,void 0,void 0,function(){var t,n;return u(this,function(e){switch(e.label){case 0:return t=o||"",n=this,[4,i.A.get("".concat(a.URL_SERVER_API,"relations/").concat(r,"?game=").concat(t))];case 1:return n.relation=e.sent().data,[2]}})})},r.prototype.post=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,o.A.post("http://localhost:3000/api/relations/",t)];case 1:return e.sent(),[4,this.getByUser(String(t.user_id))];case 2:return e.sent(),[2]}})})},r.prototype.grade=function(n){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(a.URL_SERVER_API,"grades?game=").concat(n))];case 1:return t=e.sent(),[2,t.json()]}})})},r.prototype.gradeChange=function(t,n,r){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return 0==t?t=null:Number(t),[4,o.A.put("".concat(a.URL_SERVER_API,"relations/").concat(n),{grade:t,user_id:r})];case 1:return e.sent(),[2]}})})},r.prototype.relationGame=function(t,n){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(a.URL_SERVER_API,"relations/").concat(t,"?game=").concat(n))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}})})},r.prototype.relationParse=function(){return s(this,void 0,void 0,function(){var t,n,r,o,a,s;return u(this,function(e){switch(e.label){case 0:t={planned:[],dropped:[],play:[],passed:[]},r=(n=0,c.HO)(this.relation),e.label=1;case 1:return n<r.length?(o=r[n],[4,i.A.get("http://localhost:3000/api/gameDB/".concat(o.game))]):[3,5];case 2:return a=e.sent().data,[4,i.A.get("http://localhost:3000/api/grades?game=".concat(o.game))];case 3:s=e.sent().data[0].grade,o.name=a.name,o.capsule_image=a.capsule_image,o.total_reviews=a.total_reviews,o.rating=(100-a.total_negative/a.total_reviews*100).toFixed(2),o.grade=o.grade,o.gradeSite=s,"planned"==o.status&&t.planned.push(o),"dropped"==o.status&&t.dropped.push(o),"play"==o.status&&t.play.push(o),"passed"==o.status&&t.passed.push(o),e.label=4;case 4:return n++,[3,1];case 5:return[2,t]}})})};let l=new r},5499:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(6540),a=function(e,s,c,i){return new(c=c||Promise)(function(n,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}a((i=i.apply(e,s||[])).next())})},s=function(r,o){var a,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(a=1,s&&(c=2&t[0]?s.return:t[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,t[1])).done)return c;switch(s=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))i.label=t[1];else if(6===t[0]&&i.label<c[1])i.label=c[1],c=t;else{if(!(c&&i.label<c[2])){c[2]&&i.ops.pop(),i.trys.pop();continue}i.label=c[2],i.ops.push(t)}}t=o.call(r,i)}catch(e){t=[6,e],s=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};let r=function(){var e=this,t=(0,o.useState)(!1),n=t[0],r=t[1];return[n,function(t){return a(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,r(!0)];case 3:return[2]}})})}]}},7166:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(4848),a=n(7555),s=n(4877),c=n(6540),i=n(1712);let o=function(){try{var e=localStorage.getItem("accessToken");0<1e3*JSON.parse(atob(e.split(".")[1])).exp-Date.now()&&0}catch(e){0}var o=(0,c.useContext)(i.o);return[(0,r.jsx)(s.A,{link:"/login",time:5e3,children:localStorage.getItem("accessToken")?"Время ожидания вышло, повторите действие, или повторно авторизируйтесь":"Для этого действия необходима авторизация"}),function(e,t){void 0===t&&(t=!0);try{var n=localStorage.getItem("accessToken"),r=JSON.parse(atob(n.split(".")[1]));if(0<1e3*r.exp-Date.now())return e();throw o.refreshAccessToken(),new Error("ACCESS TOKEN ПРОСРОЧИЛСЯ 401")}catch(e){return t?a.A.open():""}}]}},7555:(e,t,n)=>{n.d(t,{A:()=>s});var r,o,t=n(8803),n=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function a(){return null!==o&&o.apply(this,arguments)||this}o=t.A,n(a,o);let s=new a},8803:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(7813);function o(){(this.isOpen=!1,r.Gn)(this,{isOpen:r.sH,open:r.XI,close:r.XI})}o.prototype.open=function(){this.isOpen=!0},o.prototype.close=function(){this.isOpen=!1};let a=o},9220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var m=n(4848),v=n(6540),y=n(3175),g=n(7813),a=n(1987),r=function(e,s,c,i){return new(c=c||Promise)(function(n,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}a((i=i.apply(e,s||[])).next())})},o=function(r,o){var a,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(a=1,s&&(c=2&t[0]?s.return:t[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,t[1])).done)return c;switch(s=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))i.label=t[1];else if(6===t[0]&&i.label<c[1])i.label=c[1],c=t;else{if(!(c&&i.label<c[2])){c[2]&&i.ops.pop(),i.trys.pop();continue}i.label=c[2],i.ops.push(t)}}t=o.call(r,i)}catch(e){t=[6,e],s=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function s(){(0,g.l_)(this)}s.prototype.game=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,a.A.get("/game/".concat(t))];case 1:return[2,e.sent().data]}})})};let b=new s;var x=n(1712),c=n(1083),w=n(59),i=function(e,s,c,i){return new(c=c||Promise)(function(n,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}a((i=i.apply(e,s||[])).next())})},u=function(r,o){var a,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(a=1,s&&(c=2&t[0]?s.return:t[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,t[1])).done)return c;switch(s=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))i.label=t[1];else if(6===t[0]&&i.label<c[1])i.label=c[1],c=t;else{if(!(c&&i.label<c[2])){c[2]&&i.ops.pop(),i.trys.pop();continue}i.label=c[2],i.ops.push(t)}}t=o.call(r,i)}catch(e){t=[6,e],s=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function l(){(this.comments=null,g.l_)(this)}l.prototype.getByGame=function(r){return i(this,void 0,void 0,function(){var t,n=this;return u(this,function(e){switch(e.label){case 0:return[4,c.A.get("".concat(w.URL_SERVER_API,"comments/").concat(r))];case 1:return t=e.sent().data,(0,g.h5)(function(){n.comments=t}),[2]}})})},l.prototype.post=function(t){return i(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,a.A.post("".concat(w.URL_SERVER_API,"comments/"),t)];case 1:return e.sent(),[4,this.getByGame(String(t.game))];case 2:return e.sent(),[2]}})})},l.prototype.change=function(t,n,r,o){return i(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,a.A.put("".concat(w.URL_SERVER_API,"comments/").concat(t),{text:n,user_id:o})];case 1:return e.sent(),[4,this.getByGame(String(r))];case 2:return e.sent(),[2]}})})},l.prototype.delete=function(t,n){return i(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,a.A.delete("".concat(w.URL_SERVER_API,"comments/").concat(t))];case 1:return e.sent(),[4,this.getByGame(String(n))];case 2:return e.sent(),[2]}})})};let j=new l,f=n(3443);var _=n(5054),h=n(7166);let S=(0,v.memo)(function(e){var n=e.user,e=e.relation,r=(0,y.g)().id,t=(0,h.A)(),o=t[0],a=t[1],e=(t=(0,v.useState)(e?e.status:""))[0],s=t[1];return(0,m.jsxs)(m.Fragment,{children:[o,(0,m.jsxs)("select",{className:"select ".concat(e),value:e,onChange:function(t){return a(function(){var e;e=t.target.value,e={game:Number(r),status:e,user_id:n.id},_.A.post(e),s(t.target.value)})},children:[(0,m.jsx)("option",{value:"",hidden:!0,children:"Добавить в список"}),(0,m.jsx)("option",{value:"passed",children:"Пройдено"}),(0,m.jsx)("option",{value:"dropped",children:"Брошено"}),(0,m.jsx)("option",{value:"planned",children:"Запланированно"}),(0,m.jsx)("option",{value:"play",children:"Играю"})]})]})});var p=n(4237),d=n(9785),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};let N=(0,v.memo)((0,f.PA)(function(e){var n=e.user,t=(e=(0,v.useState)(5))[0],r=e[1],o=(0,y.g)().id,a=(e=(0,h.A)())[0],s=e[1],c=(e=(0,v.useState)(0))[0],i=e[1],u=(e=(0,v.useState)(""))[0],l=e[1],f=(e=(0,d.mN)()).register,e=e.handleSubmit;return(0,m.jsxs)("section",{className:"comments",children:[a,(0,m.jsx)("h2",{children:"Комментарии"}),j.comments.slice(0,t).map(function(e,t){return(0,m.jsxs)("div",{className:"comment",children:[(0,m.jsxs)("div",{className:"com-head",children:[(0,m.jsx)(y.N_,{to:"/users/".concat(e.nickname),children:(0,m.jsx)("img",{onError:function(e){return e.currentTarget.src=p},src:"".concat(w.URL_SERVER_AVATARS).concat(e.avatar)})}),(0,m.jsxs)("div",{className:"name-date",children:[(0,m.jsx)(y.N_,{to:"/users/".concat(e.nickname),children:e.nickname}),(0,m.jsx)("span",{children:e.created_at})]})]}),c==e.id&&n.id==e.user_id?(0,m.jsx)("textarea",{style:{marginTop:"10px"},value:u,onChange:function(e){return l(e.target.value)}}):(0,m.jsx)("p",{children:e.text}),c!=e.id&&n.id==e.user_id&&(0,m.jsx)("button",{onClick:function(){i(e.id),l(e.text)},children:"Изменить"}),c!=e.id&&n.id==e.user_id&&(0,m.jsx)("button",{onClick:function(){return j.delete(e.id,e.game)},children:"Удалить"}),c==e.id&&n.id==e.user_id&&(0,m.jsx)("button",{className:"button-stand",onClick:function(){j.change(e.id,u,e.game,e.user_id),i(0)},children:"Изменить"})]},t)}),j.comments.length>t&&(0,m.jsx)("button",{className:"more",onClick:function(){return r(t+5)},children:"Загрузить ещё комментарии"}),n&&(0,m.jsxs)("form",{onSubmit:e(function(t){return s(function(){return e=t.text,e={game:Number(o),text:e,user_id:n.id},void j.post(e);var e})}),children:[(0,m.jsx)("h3",{children:"Оставить комментарий"}),(0,m.jsx)("textarea",A({},f("text"))),(0,m.jsx)("button",{className:"button-stand",children:"Написать"})]})]})})),E=n.p+"assets/left.png",R=n.p+"assets/right.png";var k=n(2433);let I=(0,v.memo)(function(e){var n=e.game,r=(e=(0,v.useState)(0))[0],o=e[1],t=(e=(0,v.useState)(null))[0],a=e[1],s=(e=(0,v.useState)(!1))[0],c=e[1],i=(e=(0,v.useState)(0))[0],u=e[1];function l(e){var t;return 0<r+e?o(0):(t=document.getElementsByClassName("slider-img")[0].clientWidth*(n.screenshots.length-window.innerWidth/541),r+e<-t?o(-t):void o(r+e))}return(0,m.jsxs)(m.Fragment,{children:[s&&(0,m.jsx)(k.A,{setModal:c,children:(0,m.jsx)("img",{src:t,className:"screenshot"})}),(0,m.jsx)("h3",{children:"Скриншоты:"}),(0,m.jsxs)("div",{className:"slider",children:[(0,m.jsx)("img",{src:R,className:"slider-but right",onClick:function(){return l(-500)}}),(0,m.jsx)("img",{src:E,className:"slider-but left",onClick:function(){return l(500)}}),n.screenshots.map(function(e,t){return(0,m.jsx)("img",{className:"slider-img",style:{transform:"translateX(".concat(r,"px)")},src:e.path_thumbnail,onClick:function(){a(e.path_full),c(!0),u(t)},onKeyDown:function(e){"ArrowRight"==(e=e.key)?i<n.screenshots.length-1?(a(n.screenshots[i+1].path_full),u(i+1)):(a(n.screenshots[0].path_full),u(0)):"ArrowLeft"==e&&(0<i?(a(n.screenshots[i-1].path_full),u(i-1)):(a(n.screenshots[n.screenshots.length-1].path_full),u(n.screenshots.length-1)))},tabIndex:0},t)})]})]})});let O=(0,v.memo)(function(e){e.user;var n=e.relation,e=new Array(10).fill(""),t=(0,v.useState)(n?Number(n.grade)-1:-1),r=t[0],o=t[1],a=(t=(0,v.useState)(n?Number(n.grade)-1:-1))[0],s=t[1],c=(t=(0,v.useState)(!!n))[0],i=t[1],u=(t=(0,h.A)())[0],l=t[1];return(0,m.jsxs)(m.Fragment,{children:[u,(0,m.jsx)("div",{onMouseLeave:function(){o(a-1),i(!0)},children:e.map(function(e,t){return(0,m.jsx)("span",{onMouseEnter:function(){o(t),i(!1)},onClick:function(){return l(function(){s(r+1),i(!0),_.A.gradeChange(r+1,n.id,n.user_id)})},className:"".concat(t<=r?c?"star freeze":"star current":"star"),children:"★"},t)})})]})});var C=n(5499),P=function(e,s,c,i){return new(c=c||Promise)(function(n,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}a((i=i.apply(e,s||[])).next())})},T=function(r,o){var a,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(a=1,s&&(c=2&t[0]?s.return:t[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,t[1])).done)return c;switch(s=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))i.label=t[1];else if(6===t[0]&&i.label<c[1])i.label=c[1],c=t;else{if(!(c&&i.label<c[2])){c[2]&&i.ops.pop(),i.trys.pop();continue}i.label=c[2],i.ops.push(t)}}t=o.call(r,i)}catch(e){t=[6,e],s=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};let L=(0,v.memo)((0,f.PA)(function(){var e=(0,v.useContext)(x.o),o=(0,g.HO)(e.user),t=(e=(0,v.useState)(!1))[0],a=e[1],n=(e=(0,v.useState)(null))[0],s=e[1],r=(e=(0,v.useState)(!1))[0],c=e[1],i=(e=(0,v.useState)(null))[0],u=e[1],l=(0,y.g)().id,f=(e=(0,v.useState)(!1))[0],h=e[1],e=(e=(0,C.A)())[0];if((0,v.useEffect)(function(){!function(){P(this,void 0,void 0,function(){var t,n,r;return T(this,function(e){switch(e.label){case 0:return[4,b.game(l)];case 1:return(t=e.sent(),o)?[4,_.A.relationGame("".concat(o.id),l)]:[3,3];case 2:return r=e.sent()[0],[3,4];case 3:r=null,e.label=4;case 4:return n=r,[4,j.getByGame(l)];case 5:return e.sent(),[4,s(t[l].data)];case 6:return e.sent(),u(n),a(!0),[2]}})})}()},[l]),e)throw new Error("Ошибка: Steam API не отвечает");var e=(0,v.useMemo)(function(){return(0,m.jsx)("button",{onClick:function(){return h(!f)},style:{marginTop:"10px"},className:"more",children:f?"Скрыть полное описание":"Открыть полное описание"})},[f]),p=(0,v.useMemo)(function(){return(0,m.jsx)(O,{user:o,relation:i})},[i]),d=(0,v.useMemo)(function(){return(0,m.jsx)(S,{user:o,relation:i})},[i]);if(t)return(0,m.jsxs)("main",{style:{paddingBottom:"2vh"},children:[(0,m.jsx)("h1",{children:(0,m.jsx)("strong",{children:n.name})}),(0,m.jsxs)("section",{className:"game-information",children:[(0,m.jsxs)("div",{className:"game-left",children:[(0,m.jsx)("img",{src:n.header_image}),d,i&&p]}),(0,m.jsxs)("div",{className:"game-right",children:[(0,m.jsxs)("p",{children:["Дата релиза: ",(0,m.jsx)(y.N_,{to:"".concat(w.URL_CLIENT_GAMES,"?release_date=").concat(n.release_date.date.split(" ")[2]),children:n.release_date.date})]}),(0,m.jsxs)("p",{children:["Жанр: ",n.genres.map(function(e,t){return(0,m.jsxs)(y.N_,{to:"/".concat(e.description),children:[e.description,", "]},t)})]}),(0,m.jsxs)("p",{children:["Категории: ",n.categories.map(function(e,t){return(0,m.jsxs)("span",{children:[e.description,", "]},t)})]}),(0,m.jsxs)("p",{children:["Разработчик: ",n.developers.map(function(e,t){return(0,m.jsxs)(y.N_,{to:"".concat(w.URL_CLIENT_GAMES,"?developer=").concat(e),children:[e,", "]},t)})]}),(0,m.jsxs)("p",{children:["Издатель: ",n.publishers.map(function(e,t){return(0,m.jsxs)(y.N_,{to:"".concat(w.URL_CLIENT_GAMES,"?publisher=").concat(e),children:[e,", "]},t)})]}),n.metacritic&&(0,m.jsxs)("p",{children:["Оценка на Metacritic: ",n.metacritic.score]}),(0,m.jsxs)("p",{style:r?{}:{cursor:"pointer"},onClick:function(){return c(!0)},children:["Короткое описание: ",r?n.short_description:n.short_description.split(" ").slice(0,10).join(" ")+"..."]})]})]}),e,f&&(0,m.jsx)("div",{className:"full-description",dangerouslySetInnerHTML:{__html:n.detailed_description}}),(0,m.jsx)(I,{game:n}),(0,m.jsx)(N,{user:o})]});(0,m.jsx)("div",{children:"Загрузка"})}))}}]);